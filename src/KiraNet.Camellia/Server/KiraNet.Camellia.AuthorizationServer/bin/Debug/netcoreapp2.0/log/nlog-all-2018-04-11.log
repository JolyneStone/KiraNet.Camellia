2018-04-11 14:35:50.2677|0|IdentityServer4.Startup|DEBUG|Using Identity.Application as default scheme for authentication 
2018-04-11 14:35:50.4425|0|IdentityServer4.Startup|DEBUG|Using Identity.External as default scheme for sign-in 
2018-04-11 14:35:50.4713|0|IdentityServer4.Startup|DEBUG|Using Identity.External as default scheme for sign-out 
2018-04-11 14:35:50.4956|0|IdentityServer4.Startup|DEBUG|Using Identity.Application as default scheme for challenge 
2018-04-11 14:35:50.5256|0|IdentityServer4.Startup|DEBUG|Using Identity.Application as default scheme for forbid 
2018-04-11 14:35:51.4903|0|IdentityServer4.EntityFramework.TokenCleanup|DEBUG|Starting token cleanup 
2018-04-11 14:35:53.3495|1|Microsoft.AspNetCore.Hosting.Internal.WebHost|INFO|Request starting HTTP/1.1 GET http://localhost:5000/   
2018-04-11 14:35:53.5500|7|Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler|INFO|Identity.Application was not authenticated. Failure message: Unprotect ticket failed 
2018-04-11 14:35:53.6463|7|Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler|INFO|Identity.Application was not authenticated. Failure message: Unprotect ticket failed 
2018-04-11 14:35:54.9349|1|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|INFO|Executing action method KiraNet.Camellia.AuthorizationServer.Controllers.HomeController.Index (KiraNet.Camellia.AuthorizationServer) with arguments ((null)) - ModelState is Valid 
2018-04-11 14:36:06.0572|1|Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor|INFO|Executing ViewResult, running view at path /Views/Home/Index.cshtml. 
2018-04-11 14:36:11.4218|2|Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker|INFO|Executed action KiraNet.Camellia.AuthorizationServer.Controllers.HomeController.Index (KiraNet.Camellia.AuthorizationServer) in 16695.2227ms 
2018-04-11 14:36:11.4573|2|Microsoft.AspNetCore.Hosting.Internal.WebHost|INFO|Request finished in 18266.0983ms 200 text/html; charset=utf-8 
2018-04-11 14:36:18.6777|1|Microsoft.AspNetCore.Hosting.Internal.WebHost|INFO|Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration   
2018-04-11 14:36:19.9622|0|IdentityServer4.Hosting.CorsPolicyProvider|DEBUG|CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5200 
2018-04-11 14:36:20.4613|10403|Microsoft.EntityFrameworkCore.Infrastructure|INFO|Entity Framework Core 2.0.2-rtm-10011 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=KiraNet.Camellia.AuthorizationServer  
2018-04-11 14:36:21.2303|20101|Microsoft.EntityFrameworkCore.Database.Command|INFO|Executed DbCommand (538ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [x.AllowedCorsOrigins].[Origin]
FROM [Clients] AS [x]
INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId] 
2018-04-11 14:36:21.2698|0|IdentityServer4.EntityFramework.Services.CorsPolicyService|DEBUG|Origin http://localhost:5200 is allowed: True 
2018-04-11 14:36:21.3047|0|IdentityServer4.Hosting.CorsPolicyProvider|DEBUG|CorsPolicyService allowed origin: http://localhost:5200 
2018-04-11 14:36:21.3761|4|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|INFO|Policy execution successful. 
2018-04-11 14:36:21.5018|0|IdentityServer4.Hosting.EndpointRouter|DEBUG|Request path /.well-known/openid-configuration matched to endpoint type Discovery 
2018-04-11 14:36:21.5920|0|IdentityServer4.Hosting.EndpointRouter|DEBUG|Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint 
2018-04-11 14:36:21.7297|0|IdentityServer4.Hosting.IdentityServerMiddleware|INFO|Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration 
2018-04-11 14:36:22.2665|0|IdentityServer4.Endpoints.DiscoveryEndpoint|DEBUG|Start discovery request 
2018-04-11 14:36:22.9090|20101|Microsoft.EntityFrameworkCore.Database.Command|INFO|Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [x]
ORDER BY [x].[Id] 
2018-04-11 14:36:23.3819|20101|Microsoft.EntityFrameworkCore.Database.Command|INFO|Executed DbCommand (218ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
FROM [IdentityClaims] AS [x.UserClaims]
INNER JOIN (
    SELECT [x0].[Id]
    FROM [IdentityResources] AS [x0]
) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
ORDER BY [t].[Id] 
2018-04-11 14:36:23.7198|20101|Microsoft.EntityFrameworkCore.Database.Command|INFO|Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
FROM [ApiResources] AS [x]
ORDER BY [x].[Id] 
2018-04-11 14:36:23.7449|1|Microsoft.AspNetCore.Hosting.Internal.WebHost|INFO|Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration   
2018-04-11 14:36:23.8820|0|IdentityServer4.Hosting.EndpointRouter|DEBUG|Request path /.well-known/openid-configuration matched to endpoint type Discovery 
2018-04-11 14:36:24.2249|0|IdentityServer4.Hosting.EndpointRouter|DEBUG|Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint 
2018-04-11 14:36:24.3710|20101|Microsoft.EntityFrameworkCore.Database.Command|INFO|Executed DbCommand (251ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
FROM [ApiSecrets] AS [x.Secrets]
INNER JOIN (
    SELECT [x0].[Id]
    FROM [ApiResources] AS [x0]
) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
ORDER BY [t].[Id] 
2018-04-11 14:36:24.6284|0|IdentityServer4.Hosting.IdentityServerMiddleware|INFO|Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration 
2018-04-11 14:36:24.7952|20101|Microsoft.EntityFrameworkCore.Database.Command|INFO|Executed DbCommand (226ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [x.Scopes]
INNER JOIN (
    SELECT [x1].[Id]
    FROM [ApiResources] AS [x1]
) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
ORDER BY [t0].[Id], [x.Scopes].[Id] 
2018-04-11 14:36:24.8520|0|IdentityServer4.Endpoints.DiscoveryEndpoint|DEBUG|Start discovery request 
2018-04-11 14:36:24.8861|10403|Microsoft.EntityFrameworkCore.Infrastructure|INFO|Entity Framework Core 2.0.2-rtm-10011 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=KiraNet.Camellia.AuthorizationServer  
2018-04-11 14:36:24.9575|20101|Microsoft.EntityFrameworkCore.Database.Command|INFO|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [x]
ORDER BY [x].[Id] 
2018-04-11 14:36:25.0553|20101|Microsoft.EntityFrameworkCore.Database.Command|INFO|Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
FROM [IdentityClaims] AS [x.UserClaims]
INNER JOIN (
    SELECT [x0].[Id]
    FROM [IdentityResources] AS [x0]
) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
ORDER BY [t].[Id] 
2018-04-11 14:36:25.1018|20101|Microsoft.EntityFrameworkCore.Database.Command|INFO|Executed DbCommand (120ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
INNER JOIN (
    SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
    FROM [ApiScopes] AS [x.Scopes0]
    INNER JOIN (
        SELECT [x2].[Id]
        FROM [ApiResources] AS [x2]
    ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
ORDER BY [t2].[Id0], [t2].[Id] 
2018-04-11 14:36:25.1257|20101|Microsoft.EntityFrameworkCore.Database.Command|INFO|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
FROM [ApiResources] AS [x]
ORDER BY [x].[Id] 
2018-04-11 14:36:25.1696|20101|Microsoft.EntityFrameworkCore.Database.Command|INFO|Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
FROM [ApiSecrets] AS [x.Secrets]
INNER JOIN (
    SELECT [x0].[Id]
    FROM [ApiResources] AS [x0]
) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
ORDER BY [t].[Id] 
2018-04-11 14:36:25.2174|20101|Microsoft.EntityFrameworkCore.Database.Command|INFO|Executed DbCommand (40ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
FROM [ApiClaims] AS [x.UserClaims]
INNER JOIN (
    SELECT [x3].[Id]
    FROM [ApiResources] AS [x3]
) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
ORDER BY [t3].[Id] 
2018-04-11 14:36:25.2511|20101|Microsoft.EntityFrameworkCore.Database.Command|INFO|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [x.Scopes]
INNER JOIN (
    SELECT [x1].[Id]
    FROM [ApiResources] AS [x1]
) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
ORDER BY [t0].[Id], [x.Scopes].[Id] 
2018-04-11 14:36:25.4021|20101|Microsoft.EntityFrameworkCore.Database.Command|INFO|Executed DbCommand (53ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
INNER JOIN (
    SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
    FROM [ApiScopes] AS [x.Scopes0]
    INNER JOIN (
        SELECT [x2].[Id]
        FROM [ApiResources] AS [x2]
    ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
ORDER BY [t2].[Id0], [t2].[Id] 
2018-04-11 14:36:25.4529|20101|Microsoft.EntityFrameworkCore.Database.Command|INFO|Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
FROM [ApiClaims] AS [x.UserClaims]
INNER JOIN (
    SELECT [x3].[Id]
    FROM [ApiResources] AS [x3]
) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
ORDER BY [t3].[Id] 
2018-04-11 14:36:25.6352|0|IdentityServer4.EntityFramework.Stores.ResourceStore|DEBUG|Found openid, profile, email, api_name, client_name as all scopes in database 
2018-04-11 14:36:25.6555|0|IdentityServer4.EntityFramework.Stores.ResourceStore|DEBUG|Found openid, profile, email, api_name, client_name as all scopes in database 
2018-04-11 14:36:26.4589|2|Microsoft.AspNetCore.Hosting.Internal.WebHost|INFO|Request finished in 2632.059ms 200 application/json; charset=UTF-8 
2018-04-11 14:36:26.4722|2|Microsoft.AspNetCore.Hosting.Internal.WebHost|INFO|Request finished in 7936.0976ms 200 application/json; charset=UTF-8 
2018-04-11 14:36:26.5235|1|Microsoft.AspNetCore.Hosting.Internal.WebHost|INFO|Request starting HTTP/1.1 GET http://localhost:5000/connect/checksession   
2018-04-11 14:36:26.5497|7|Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler|INFO|Identity.Application was not authenticated. Failure message: Unprotect ticket failed 
2018-04-11 14:36:26.5686|7|Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler|INFO|Identity.Application was not authenticated. Failure message: Unprotect ticket failed 
2018-04-11 14:36:26.5899|0|IdentityServer4.Hosting.EndpointRouter|DEBUG|Request path /connect/checksession matched to endpoint type Checksession 
2018-04-11 14:36:26.6148|0|IdentityServer4.Hosting.EndpointRouter|DEBUG|Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint 
2018-04-11 14:36:26.6397|0|IdentityServer4.Hosting.IdentityServerMiddleware|INFO|Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession 
2018-04-11 14:36:26.7509|0|IdentityServer4.Endpoints.CheckSessionEndpoint|DEBUG|Rendering check session result 
2018-04-11 14:36:26.8874|2|Microsoft.AspNetCore.Hosting.Internal.WebHost|INFO|Request finished in 350.9797ms 200 text/html; charset=UTF-8 
2018-04-11 14:36:26.9360|1|Microsoft.AspNetCore.Hosting.Internal.WebHost|INFO|Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks   
2018-04-11 14:36:26.9749|0|IdentityServer4.Hosting.EndpointRouter|DEBUG|Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery 
2018-04-11 14:36:27.0012|0|IdentityServer4.Hosting.EndpointRouter|DEBUG|Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint 
2018-04-11 14:36:27.0251|0|IdentityServer4.Hosting.IdentityServerMiddleware|INFO|Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks 
2018-04-11 14:36:27.0696|0|IdentityServer4.Endpoints.DiscoveryKeyEndpoint|DEBUG|Start key discovery request 
2018-04-11 14:36:27.5474|2|Microsoft.AspNetCore.Hosting.Internal.WebHost|INFO|Request finished in 650.785ms 200 application/json; charset=UTF-8 
